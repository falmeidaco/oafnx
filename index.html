<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Objeto de Apendizagem</title>
    <link rel="stylesheet" href="js/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="js/bower_components/unslider/dist/css/unslider.css">
    <link rel="stylesheet" href="js/bower_components/unslider/dist/css/unslider-dots.css">
    <link rel="stylesheet" href="style.css">
    <script src="js/bower_components/jquery/jquery.min.js"></script>
    <script src="js/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="js/bower_components/unslider/dist/js/unslider-min.js"></script>
</head>
<body>
    <div class="app-container">
        <main id="mainApp" class="appui">
           
            <!-- Screen Stage -->
            <div class="screen-stage">
                <div class="screen-container">
                    <header>
                        <img class="stage-icon" src="stages/supermarket/files/main-icon.png">
                        <h2 class="title stage-title">Você está no <span>Mercado!</span></h2>
                        <button class="ui-btn back-home"><span class="glyphicon glyphicon-circle-arrow-left"></span> Voltar</button>
                    </header>
                    <div class="stage-content">
                        <!--
                        <div class="slider-content">
                            <ul>
                                <li>
                                    <div class="slider-image">
                                        <img src="stages/supermarket/files/Untitled-1.jpg" alt="Imagem 1">
                                    </div>
                                    <p class="slider-text">
                                        <span>DONA LUZIA</span> - Joãozinho meu filho, como vai você?<br>
                                        <span>Joãozinho</span> - Estou bem Dona Luzia, e a senhora, indo para as compras?
                                    </p>
                                </li>
                                <li>
                                    <div class="slider-image">
                                        <img src="stages/supermarket/files/Untitled-1.jpg" alt="Imagem 1">
                                    </div>
                                    <p class="slider-text">
                                        <span>DONA LUZIA</span> - Sim sim meu querido, mas eu estou tão cansada... Poderia me ajudar a fazer umas contas? Você é bom em matemática né meu jovem?<br>
                                        <span>Joãozinho</span> - Mas é claro Dona Luzia!
                                    </p>
                                </li>
                                <li><iframe scrolling="no" src="funcionalidade.html" width="960" height="445" frameborder="0"></iframe></li>
                                <li>
                                    <div class="slider-image">
                                        <img src="stages/supermarket/files/Untitled-1.jpg" alt="Imagem 1">
                                    </div>
                                    <p class="slider-text">
                                        <span>DONA LUZIA</span> - Muito obrigado Joãoziho! Você me ajudou muito nas compras.<br>
                                        <span>Joãozinho</span> - Que nada Dona Luzia!
                                    </p>
                                </li>
                            </ul>
                        </div>
                        -->
                    </div>
                </div>
            </div>
            
            <!-- Screen HOME -->
            <div class="screen-home">
                <div class="screen-container">
                    <div class="app-logo">
                       <img src="assets/media/logo-propolandia.png" alt="Propolândia - Descobrindo Proporções">
                    </div>
                    <div class="home-welcome-text">
                        <p><strong>Bem vindo à Propolândia!</strong><br> Explore a cidade e aprenda sobre proporções matemáticas!</p>
                    </div>
                    <div class="home-options-default">
                        <button class="ui-btn">Ajuda</button>
                        <button class="ui-btn">Créditos</button>
                    </div>
                    <div class="stage-options">
                        <div class="stage-options-container">
                            <ul class="stage-options-list">
                                <!--<li class="stage-item">
                                    <a href="#">
                                        <img src="stages/supermarket/files/main-icon.png" alt="Supermercado">
                                    </a>
                                </li>
                                -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div> 

        </main>    
    </div>
    <script src="Propolandia.js"></script>
    <script>
        (function($){
            jQuery(document).ready(function() {
                
                function exibirPainelAmbiente(status) {
                    if (status === true) {
                        $(".screen-stage").animate({"top":"0"},1000);
                    } else {
                        $(".screen-stage").animate({"top":"-560px"},1000);
                    }
                }
                
                function exibirHome(status) {
                    if (status === true) {
                        $(".app-logo").animate({"top":"30px"},1000);
                        $(".home-options-default").animate({"right":"15px"},1000);            
                        $(".home-welcome-text").animate({"bottom":"15px"},1000);
                    } else {
                        $(".app-logo").animate({"top":"-200px"},1000);
                        $(".home-options-default").animate({"right":"-300px"},1000);
                        $(".home-welcome-text").animate({"bottom":"-40px"},1000);
                    }
                }
                
                //Cria e inicializa objeto classe Propolandia
                var oa = new Propolandia();
                oa.setStages(Ambientes);
                
                //Cria ícones dos ambientes
                $.each(oa.getStages(), function(i, stage) {
                    $('.stage-options-list').append('<li class="stage-item" data-stage-itemname="'+stage.properties.nicename+'"><a href="#'+stage.properties.nicename+'" data-stage-name="' + stage.properties.nicename + '"><img src="' + oa.getStageAsset(stage.properties.nicename, stage.properties.icon_default, true).src + '" alt="' + stage.properties.name + '"></a></li>');
                });
                
                //Adiciona evento aos ícones dos ambientes.
                $('.stage-item a').on('click', function (e) {
                    
                    oa.setCurrentStage($(this).data().stageName);
                    
                    $(".stage-title").html(oa.getCurrentStage().properties.welcome_prefix + '<span>' + oa.getCurrentStage().properties.name + '</span>');
                    $(".stage-icon").attr('src', oa.getStageAsset(oa.getCurrentStage().properties.nicename, oa.getCurrentStage().properties.icon_default).src);
                    
                    exibirHome(false);
                    exibirPainelAmbiente(true);
                    return false;
                });
                //Adicione evento para o botão voltar
                $(".back-home").click(function() {
                    exibirHome(true);
                    exibirPainelAmbiente(false);
                    return false;
                });
            });
        }(jQuery));
    </script>
</body>
</html>
